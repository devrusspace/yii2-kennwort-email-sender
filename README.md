<h1>
Yii2 email sender
</h1>

<p>

[![Latest Stable Version](https://poser.pugx.org/devrusspace/yii2-kennwort-email-sender/version)](//packagist.org/packages/devrusspace/yii2-kennwort-email-sender)
[![Latest Unstable Version](https://poser.pugx.org/devrusspace/yii2-kennwort-email-sender/v/unstable)](https://packagist.org/packages/devrusspace/yii2-kennwort-email-sender)
[![License](https://poser.pugx.org/devrusspace/yii2-kennwort-email-sender/license)](https://packagist.org/packages/devrusspace/yii2-kennwort-email-sender)
</p>

–û—Ç–ø—Ä–∞–≤–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã—Ö –∏ —Ç—Ä–∏–≥–µ—Ä–Ω—ã—Ö e-mail —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —à–∞–±–ª–æ–Ω–æ–≤ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ —Å–µ—Ä–≤–∏—Å–∞ https://kennwort.ru. –®–∞–±–ª–æ–Ω—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–µ—Ö–∞–Ω–∏–∑–º layout, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–∞—à–∏ —Ç—Ä–∏–≥–µ—Ä–Ω—ã–µ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –ø–∏—Å–µ–º.

–î–∞–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞–∫–µ—Ç `devrusspace/kennwort-email-sender`, –∫–æ—Ç–æ—Ä—ã–π –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å api —Å–µ—Ä–≤–∏—Å–∞. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ api —Ä–∞–∑–º–µ—â–µ–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É https://api.kennwort.ru/doc.

–£—Å—Ç–∞–Ω–æ–≤–∫–∞
------------

–ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —ç—Ç–æ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è - —á–µ—Ä–µ–∑ [composer](http://getcomposer.org/download/).

–í—ã–ø–æ–ª–Ω–∏—Ç–µ

```
php composer.phar require devrusspace/yii2-kennwort-email-sender "^1.0"
```

–∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ

```
"devrusspace/yii2-kennwort-email-sender": "^1.0"
```

–≤ —Å–µ–∫—Ü–∏—é require –≤–∞—à–µ–≥–æ —Ñ–∞–π–ª–∞ `composer.json` –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `php composer.phar install`.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
-----
–¥–æ–±–∞–≤—å—Ç–µ kennwort –≤ —Å–µ–∫—Ü–∏—é components –≤–∞—à–µ–≥–æ config.php
```php
<?php
return [
    'components' => [
        'kennwort' => [
            'class' => 'Devrusspace\KennwortYii2\ApiClient',
            'token' => '–≤–∞—à_—Ç–æ–∫–µ–Ω_—Å–æ–∑–¥–∞–Ω–Ω—ã–π_–≤_–ª–∏—á–Ω–æ–º_–∫–∞–±–∏–Ω–µ—Ç–µ',
            'defaultSenderId' => '–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä_email_–∏–∑_–≤–∞—à–µ–≥–æ_—Å–ø–∏—Å–∫–∞_–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π',
        ],
    ]
];
?>
```
### –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–∞
–®–∞–±–ª–æ–Ω –ø–∏—Å—å–º–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ. –ò–º—è –∏ e-mail –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —à–∞–±–ª–æ–Ω–∞.
```php
<?php  
$template = 'user/registration';
$mailTo = ['test@test.com' => '–ò–º—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è'];
$params = ['var1' => '–∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ —à–∞–±–ª–æ–Ω'];
$result = Yii::$app->kennwort->sendEmail($template, $mailTo, $params);
$emailId = $result->email->id; // –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
?>
```
–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:
```php
print_r($result);

stdClass Object
(
    [result] => 1
    [email] => stdClass Object
        (
            [id] => 42bbd42d6dafddb160d61530f8ce9bb2
        )
)
```

–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–∏—Å—å–º–∞ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –≤ –æ—Ç–≤–µ—Ç–µ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–º—É –ø–∏—Å—å–º—É.

### –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
#### –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
–û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞ –æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è  :
```php
<?php  
$mailTo = ['test@test.com' => '–ò–º—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è'];
$subject = '–ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–∏—Å—å–º–∞';
$body = 'Html –∫–æ–¥ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –ø–∏—Å—å–º–∞';
$result = Yii::$app->kennwort->sendEmailDefaultSenderBody($mailTo, $subject, $body);
?>
```
–û—Ç–≤–µ—Ç –∏–¥–µ–Ω—Ç–∏—á–µ–Ω –º–µ—Ç–æ–¥—É `–û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–∞`

#### –° —É–∫–∞–∑–∞–Ω–∏–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
–û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è  :
```php
<?php  
$senderId = '–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä_email_–∏–∑_–≤–∞—à–µ–≥–æ_—Å–ø–∏—Å–∫–∞_–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π'
$mailTo = ['test@test.com' => '–ò–º—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è'];
$subject = '–ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–∏—Å—å–º–∞';
$body = 'Html –∫–æ–¥ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –ø–∏—Å—å–º–∞';
$result = Yii::$app->kennwort->sendEmailBody($senderId, $mailTo, $subject, $body);
?>
```
–û—Ç–≤–µ—Ç –∏–¥–µ–Ω—Ç–∏—á–µ–Ω –º–µ—Ç–æ–¥—É `–û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–∞`

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É –≤—ã –º–æ–∂–µ—Ç–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —ç—Ç–æ–º—É –º–µ—Ç–æ–¥—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—Ä–µ–º—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏/–ø—Ä–æ—á—Ç–µ–Ω–∏—è –∏–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –ø–æ —Å—Å—ã–ª–∫–µ –∏–∑ –ø–∏—Å—å–º–∞.
```php
<?php  
$result = Yii::$app->kennwort->getEmail($emailId);
?>
```
–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:
```php
print_r($result);

stdClass Object
(
    [id] => 8993cc6ffbfd04173d846c0113a97abe
    [time_add] => 1671777031
    [time_sended] => 1671777031
    [time_opened] => 
    [time_clicked] => 
    [time_opened_last] => 
    [time_clicked_last] => 
    [opened] => 
    [cliked] => 
    [is_test] => 
)
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤
–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —Å–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –≤–∞—à–µ–π crm —Å–∏—Å—Ç–µ–º–µ.
```php
<?php  
$page = 1;
$perPage = 50;
$result = Yii::$app->kennwort->getTransactionsTemplates($page, $perPage);
?>
```
–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:
```php
print_r($result);

Array
(
    [0] => stdClass Object
        (
            [id] => daf1670c9aa1b629a294b4556ffa600d
            [key] => user/registration
            [name] => user / –ü—Ä–∏–≤–µ—Ç—Å–≤–µ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ
            [mail_subject] => –ü—Ä–∏–≤–µ—Ç—Å–≤—É–µ–º –≤ —Å–µ—Ä–≤–∏—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã—Ö —Ä–∞—Å—Å—ã–ª–æ–∫
            [mail_pre_text] => {{userName}} –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —á–µ—Ä–µ–∑ –Ω–∞—Å –ø—Ä–æ—Å—Ç–æ ü§†
        )

)
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π
–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π —Å e-mail –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥—É—Ç —É—Ö–æ–¥–∏—Ç—å –æ—Ç–ø–∞—Ä–≤–ª—è–µ–º—ã–µ –≤–∞–º–∏ –ø–∏—Å—å–º–∞. –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç.
```php
<?php  
$page = 1;
$perPage = 50;
$result = Yii::$app->kennwort->getSenders($page, $perPage);
?>
```
–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:
```php
print_r($result);

Array
(
    [0] => stdClass Object
        (
            [id] => 13d7c0f5a82f34ad9a76a163bc80a7f4
            [time_add] => 1669741763
            [email] => kennwort@devrus.space
            [name] => –°–µ—Ä–≤–∏—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã—Ö —Ä–∞—Å—Å—ã–ª–æ–∫
        )
)
```
